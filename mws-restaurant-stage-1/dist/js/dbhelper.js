"use strict";function _typeof(n){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function _createClass(n,e,t){return e&&_defineProperties(n.prototype,e),t&&_defineProperties(n,t),n}var DBHelper=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"fetchRestaurants",value:function(e,t){var r=n.DATABASE_URL;r=t?n.DATABASE_URL+"/"+t:n.DATABASE_URL,fetch(r).then(function(n){n.json().then(function(n){console.log("restaurants JSON: ",n),e(null,n)})})["catch"](function(n){var t="Request failed. Returned ".concat(n);e(t,null)})}},{key:"fetchRestaurantById",value:function(e,t){n.fetchRestaurants(function(n,r){if(n)console.log("callback type: ".concat(_typeof(t))),t(n,null);else{var u=r.find(function(n){return n.id==e});u?t(null,u):t("Restaurant does not exist",null)}})}},{key:"fetchRestaurantByCuisine",value:function(e,t){n.fetchRestaurants(function(n,r){if(n)e(n,null);else{var u=r.filter(function(n){return n.cuisine_type==t});e(null,u)}})}},{key:"fetchRestaurantByNeighborhood",value:function(e,t){n.fetchRestaurants(function(n,r){if(n)e(n,null);else{var u=r.filter(function(n){return n.neighborhood==t});e(null,u)}})}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(e,t,r){n.fetchRestaurants(function(n,u){if(n)r(n,null);else{var o=u;"all"!=e&&(o=o.filter(function(n){return n.cuisine_type==e})),"all"!=t&&(o=o.filter(function(n){return n.neighborhood==t})),r(null,o)}})}},{key:"fetchNeighborhoods",value:function(e){n.fetchRestaurants(function(n,t){if(n)e(n,null);else{var r=t.map(function(n,e){return t[e].neighborhood}),u=r.filter(function(n,e){return r.indexOf(n)==e});e(null,u)}})}},{key:"fetchCuisines",value:function(e){n.fetchRestaurants(function(n,t){if(n)e(n,null);else{var r=t.map(function(n,e){return t[e].cuisine_type}),u=r.filter(function(n,e){return r.indexOf(n)==e});e(null,u)}})}},{key:"urlForRestaurant",value:function(n){return"./restaurant.html?id=".concat(n.id)}},{key:"imageUrlForRestaurant",value:function(n){return"/img/".concat(n.id,".jpg")}},{key:"mapMarkerForRestaurant",value:function(e,t){var r=new L.marker([e.latlng.lat,e.latlng.lng],{title:e.name,alt:e.name,url:n.urlForRestaurant(e)});return r.addTo(newMap),r}},{key:"DATABASE_URL",get:function(){var n=1337;return"http://localhost:".concat(n,"/restaurants")}}]),n}();
//# sourceMappingURL=dbhelper.js.map
