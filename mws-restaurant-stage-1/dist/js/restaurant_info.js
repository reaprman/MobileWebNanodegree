"use strict";var restaurant,newMap;document.addEventListener("DOMContentLoaded",function(e){initMap()});var initMap=function(){fetchRestaurantFromURL(function(e,t){e?console.error(e):(self.newMap=L.map("map",{center:[t.latlng.lat,t.latlng.lng],zoom:16,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoidGhlZ3JlYXRkZWJhdGUiLCJhIjoiY2pqeHhjY2V4YWh4ZDNxbGZtMXAxdndmdSJ9.buoZhVfjmQ4MLiAk0B4vaA",maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(newMap),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.newMap))})},fetchRestaurantFromURL=function(e){if(self.restaurant)return void e(null,self.restaurant);var t=getParameterByName("id");t?DBHelper.fetchRestaurantById(t,function(t,n){return self.restaurant=n,n?(fillRestaurantHTML(),void e(null,n)):void console.error(t)}):(error="No restaurant id in URL",e(error,null))},fillRestaurantHTML=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("restaurant-name");t.innerHTML=e.name;var n=document.getElementById("restaurant-address");n.innerHTML=e.address;var a=document.getElementById("restaurant-img"),r=DBHelper.imageUrlForRestaurant(e),i=r.split("."),l=i[0]+"-400_1x."+i[1],o=i[0]+"-800_2x."+i[1],d=i[0]+"-1600."+i[1];a.className="restaurant-img",a.src=l,a.srcset="".concat(d," 1600w, ").concat(o," 800w, ").concat(l," 400w"),a.sizes="(max-width: 400px) 400px, (max-width: 800px) 800px, (max-width: 1200px) 1600px",a.alt=e.name;var c=document.getElementById("restaurant-cuisine");c.innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML(),fillReviewModal()},fillReviewModal=function(){var e=document.createElement("div");e.className="modal",e.id="modal";var t=document.createElement("div");t.className="modal-content";var n=document.createElement("span");n.className="close-btn",n.innerHTML="&times;",t.appendChild(n);var a=document.createElement("input");a.className="rvw-reviewer",a.setAttribute("type","text"),a.setAttribute("value","Your Name"),t.appendChild(a);var r=document.createElement("select"),i=document.createElement("option"),l=[1,2,3,4,5];l.forEach(function(e){i.value=e,r.appendChild(i)}),t.appendChild(r);var o=document.createElement("textarea");o.className="rvw-comment",t.appendChild(o);var d=document.createElement("input");d.className="submit-btn",d.setAttribute("type","submit"),d.innerHTML="Save Review",t.appendChild(d),e.appendChild(t);var c=document.getElementById("reviews-container");c.appendChild(e)},fillRestaurantHoursHTML=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var a=document.createElement("tr"),r=document.createElement("td");r.innerHTML=n,a.appendChild(r);var i=document.createElement("td");i.innerHTML=e[n],a.appendChild(i),t.appendChild(a)}},fillReviewsHTML=function(e,t){e&&console.log("Error displaying reviews: ".concat(e)),self.restaurant.reviews=t;var n=document.getElementById("reviews-container"),a=document.createElement("h2");a.innerHTML="Reviews";var r=document.createElement("a");if(r.innerHTML="Add Review",r.onclick=function(){var e=getElementbyId("modal");e.classList.toggle("show-modal")},a.appendChild(r),n.appendChild(a),!t){var i=document.createElement("p");return i.innerHTML="No reviews yet!",void n.appendChild(i)}var l=document.getElementById("reviews-list");t.forEach(function(e){l.appendChild(createReviewHTML(e))}),n.appendChild(l)},createReviewHTML=function(e){var t=document.createElement("li"),n=document.createElement("p");n.innerHTML=e.name,t.appendChild(n);var a=document.createElement("p");a.innerHTML=e.date,t.appendChild(a);var r=document.createElement("p");r.innerHTML="Rating: ".concat(e.rating),t.appendChild(r);var i=document.createElement("p");return i.innerHTML=e.comments,t.appendChild(i),t},fillBreadcrumb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]".concat(e,"(=([^&#]*)|&|#|$)")),a=n.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null};
//# sourceMappingURL=restaurant_info.js.map
