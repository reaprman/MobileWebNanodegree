"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}var DBHelper=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"fetchRestaurants",value:function(n,t){var r=e.DATABASE_URL;r=t?e.DATABASE_URL+"/"+t:e.DATABASE_URL,fetch(r,{method:"GET"}).then(function(e){e.json().then(function(e){console.log("restaurants JSON: ",e),n(null,e)})})["catch"](function(e){var t="Request failed. Returned ".concat(e);n(t,null)})}},{key:"fetchRestaurantById",value:function(n,t){e.fetchRestaurants(function(e,r){if(e)console.log("callback type: ".concat(_typeof(n))),n(e,null);else{var u=r.find(function(e){return e.id==t});u?n(null,u):n("Restaurant does not exist",null)}})}},{key:"fetchRestaurantByCuisine",value:function(n,t){e.fetchRestaurants(function(e,r){if(e)n(e,null);else{var u=r.filter(function(e){return e.cuisine_type==t});n(null,u)}})}},{key:"fetchRestaurantByNeighborhood",value:function(n,t){e.fetchRestaurants(function(e,r){if(e)n(e,null);else{var u=r.filter(function(e){return e.neighborhood==t});n(null,u)}})}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(n,t,r){e.fetchRestaurants(function(e,u){if(e)console.log(_typeof(r)),r(e,null);else{var o=u;"all"!=n&&(o=o.filter(function(e){return e.cuisine_type==n})),"all"!=t&&(o=o.filter(function(e){return e.neighborhood==t})),r(null,o)}})}},{key:"fetchNeighborhoods",value:function(n){e.fetchRestaurants(function(e,t){if(e)n(e,null);else{var r=t.map(function(e,n){return t[n].neighborhood}),u=r.filter(function(e,n){return r.indexOf(e)==n});n(null,u)}})}},{key:"fetchCuisines",value:function(n){e.fetchRestaurants(function(e,t){if(e)n(e,null);else{var r=t.map(function(e,n){return t[n].cuisine_type}),u=r.filter(function(e,n){return r.indexOf(e)==n});n(null,u)}})}},{key:"urlForRestaurant",value:function(e){return"./restaurant.html?id=".concat(e.id)}},{key:"imageUrlForRestaurant",value:function(e){return"/img/".concat(e.id,".jpg")}},{key:"mapMarkerForRestaurant",value:function(n,t){var r=new L.marker([n.latlng.lat,n.latlng.lng],{title:n.name,alt:n.name,url:e.urlForRestaurant(n)});return r.addTo(newMap),r}},{key:"DATABASE_URL",get:function(){var e=1337;return"http://localhost:".concat(e,"/restaurants")}}]),e}();
//# sourceMappingURL=dbhelper.js.map
